<odoo>
  <data>
    <!-- list requisition -->
    <record model="ir.ui.view" id="tyt_recruitment.list">
      <field name="name">Lista de requisiciones</field>
      <field name="model">tyt_recruitment.requisition</field>
      <field name="arch" type="xml">
        <tree>
          <field name="id" />
          <field name="request_date" />
          <field name="closing_date" />
          <field name="state" />
        </tree>
      </field>
    </record>

    <!-- form requisition -->
    <record id="view_requisition_form" model="ir.ui.view">
      <field name="name">Formulario de Requisici칩n</field>
      <field name="model">tyt_recruitment.requisition</field>
      <field name="arch" type="xml">
        <form string="Requisici칩n">
          <header>
            <field name="state" invisible="1"/>
            <button name="action_open_popup" string="Comunicar por Correo" type="object" class="oe_highlight"/>
            <button name="action_confirm" string="Confirmar" type="object" class="oe_highlight"/>
            <field name="state" widget="statusbar" statusbar_visible="draft,sent"/>
          </header>

          <sheet>  
            <group>
              <group>
                <field name="request_date" attrs="{'readonly': [('state', '=', 'sent')]}"/>
                <field name="closing_date" attrs="{'readonly': [('state', '=', 'sent')]}"/>
                <field name="periodo_id" widget="many2one" options="{'no_create': True}"/>
              </group>
              <group>
                <field name="site_id" widget="many2one" options="{'no_create': True}"/>
              </group>
            </group>

            <notebook>
              <page string="Campa침as">
                <field name="campaign_ids" nolabel="1" attrs="{'readonly': [('state', '=', 'sent')]}" options="{'no_create': True}">
                  <tree editable="bottom">
                    <field name="tag_id" width="200px" />
                    <field name="current_staff" width="120px" />
                    <field name="goal_staff" width="120px" />
                    <field name="request_staff" width="120px"/>
                    <field name="turn" width="80px" />
                    <field name="priority" width="80px" />
                    <button 
                      name="action_open_job_application" 
                      string="Cargar candidato" 
                      type="object" 
                      class="oe_highlight" 
                      width="200px" 
                      attrs="{'invisible': [('id', '=', False)]}" />
                    <button 
                      name="action_open_applicant_list" 
                      string="Lista de candidatos" 
                      type="object" 
                      class="oe_highlight" 
                      width="200px"
                      context="{'tag_id': id}"
                      attrs="{'invisible': [('id', '=', False)]}" />
                  </tree>
                </field>
              </page>
            </notebook>
          </sheet>
          <div class="oe_chatter">
              <field name="message_follower_ids" widget="mail_followers" />
              <field name="activity_ids" widget="mail_activity" />
              <field name="message_ids" widget="mail_thread" />
          </div>
        </form>
      </field>
    </record>
    
    <!-- actions opening views on models -->

    <record model="ir.actions.act_window" id="tyt_recruitment.action_window">
      <field name="name">Lista de requisiciones</field>
      <field name="res_model">tyt_recruitment.requisition</field>
      <field name="view_mode">tree,form</field>
    </record>

    <!-- Top menu item -->

    <menuitem id="menu_custom_recruitment"
      name="Reclutamiento"
      parent="hr_recruitment.menu_hr_recruitment_root"
      sequence="20"
    />

    <menuitem id="menu_custom_requisition"
      name="Requisici칩n"
      parent="menu_custom_recruitment"
      action="tyt_recruitment.action_window"
    />
  </data>
</odoo>
